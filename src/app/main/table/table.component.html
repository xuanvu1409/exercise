<p-table [value]="dataSource">
  <ng-template pTemplate="caption">
    <p-dropdown inputId="dropdown" [autoDisplayFirst]="false" [options]="status" (onChange)="filter($event)" optionLabel="name"
                class="ng-dirty float-right" placeholder="Trạng thái" optionValue="value"></p-dropdown>
    <button pButton type="button" class="p-button-raised" (click)="handleClick()">Thêm</button>
  </ng-template>
  <ng-template pTemplate="header" let-columns>
    <tr>
      <th>TT</th>
      <th>Tên danh mục</th>
      <th>Thời gian</th>
      <th>Trạng thái</th>
      <th style="width: 300px">Thao tác</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item let-rowIndex="rowIndex" let-columns="columns">
    <tr>
      <td>{{rowIndex + 1}}</td>
      <td>{{item.tenDanhMuc}}</td>
      <td>{{item.thoiGian}}</td>
      <ng-container *ngFor="let i of status">
        <td *ngIf="i.value == item.trangThai">
          {{i.name}}
        </td>
      </ng-container>
      <td style="width: 300px">
        <span class="p-buttonset">
          <button pButton pRipple *ngIf="item.trangThai === 0" (click)="changeStatus(rowIndex)" label="Đã làm"></button>
          <button pButton pRipple (click)="edit(rowIndex)" label="Sửa" icon="pi pi-pencil"></button>
          <button pButton pRipple (click)="delete(rowIndex)" label="Xóa" icon="pi pi-trash"></button>
      </span>
      </td>
    </tr>
  </ng-template>
</p-table>
<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <p-dialog header="Thêm công việc" [(visible)]="displayModal" [breakpoints]="{'960px': '75vw'}"
            [style]="{width: '50vw'}"
            [draggable]="false" [resizable]="false">
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col-12 p-md-6">
        <label for="name" class="mb-1">Tên danh mục</label>
        <input id="name" formControlName="tenDanhMuc" type="text" pInputText>
        <div *ngIf="submitted && form.controls.tenDanhMuc.errors">
          <small class="p-error" *ngIf="form.controls.tenDanhMuc.errors.required">Vui lòng điền trường này.</small>
          <small class="p-error" *ngIf="form.controls.tenDanhMuc.errors.unique">Vui lòng điền tên danh mục khác.</small>
        </div>
      </div>
      <div class="p-field p-col-12 p-md-6">
        <label for="time" class="mb-1">Thời gian</label>
        <input id="time" formControlName="thoiGian" type="text" pInputText>
        <div *ngIf="submitted && form.controls.thoiGian.errors">
          <small class="p-error">Vui lòng điền trường này.</small>
        </div>
      </div>
      <div class="p-field p-col-12 p-md-6">
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button (click)="displayModal=false" label="Đóng" styleClass="p-button-text"></p-button>
      <p-button type="submit" label="Cập nhật" styleClass="p-button-text"></p-button>
    </ng-template>
  </p-dialog>
</form>
